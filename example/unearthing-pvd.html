<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta property="og:title" content="Leaflet Environmental Layers" />
  <meta property="og:description" content="Collection of different environmental map layers in an easy to use Leaflet library."/>
  <meta property="og:image" content="https://avatars2.githubusercontent.com/u/4621650?s=200&v=4"/>
  <meta property="og:url" content="https://publiclab.github.io/leaflet-environmental-layers/example/#3/50.51/56.78/BL2"/>
  <meta name="twitter:card" content="summary_large_image" />

  <title>Leaflet Environmental Layers</title>
  
  <script src="../node_modules/leaflet/dist/leaflet.js"></script>

  <script src="../node_modules/leaflet-blurred-location/dist/Leaflet.BlurredLocation.js"></script>
  <script src="../node_modules/leaflet.blurred-location-display/dist/Leaflet.BlurredLocationDisplay.js"></script>

  <script src="../socio-eco-project-data.js"></script> 
  <script src="https://leafletjs.com/examples/geojson/sample-geojson.js"></script> 

  <script src="../dist/LeafletEnvironmentalLayers.js"></script>
  <script src="../src/windRoseLayer.js"></script>
  <script src="../node_modules/leaflet-fullhash/leaflet-fullHash.js"></script>
  
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>

  <script src="../node_modules/heatmap.js/build/heatmap.min.js"></script>
  <script src="../node_modules/leaflet-heatmap/leaflet-heatmap.js"></script>

  <link href="../node_modules/leaflet/dist/leaflet.css" rel="stylesheet" />
  <link href="../dist/LeafletEnvironmentalLayers.css" rel="stylesheet" />

  <script src="../node_modules/leaflet-spin/example/spin/dist/spin.min.js"></script>
  <script src="../node_modules/leaflet-spin/example/leaflet.spin.min.js"></script>

  <script src="https://unpkg.com/esri-leaflet@2.2.3/dist/esri-leaflet.js"></script>
  <script src="https://unpkg.com/esri-leaflet-renderers@2.0.6"></script>

  
  <link rel="stylesheet" href="styles.css">

  </head>

  <body>
    <div id="map"></div>


<!--
<script src="../node_modules/mapbox-gl-leaflet/leaflet-mapbox-gl.js"></script>
<script src='https://api.tiles.mapbox.com/mapbox-gl-js/v1.5.0/mapbox-gl.js'></script>
<link href='https://api.tiles.mapbox.com/mapbox-gl-js/v1.5.0/mapbox-gl.css' rel='stylesheet' />
-->
<script src="../glify-debug.js"></script>

<!--
  <script src="https://robertleeplummerjr.github.io/Leaflet.glify/glify.js"></script>
  <script src="../node_modules/leaflet.glify/"></script>
-->
    <script>

      var bounds = new L.LatLngBounds(
        new L.LatLng(84.67351257, -172.96875),
        new L.LatLng(-54.36775852, 178.59375)
      );
      var map = L.map("map", {
        maxBounds: bounds,
        maxBoundsViscosity: 0.75
      }).setView([43, -83], 3);
      map.options.minZoom = 3;

      var baselayer1 =L.tileLayer(
        "https://a.tiles.mapbox.com/v3/jywarren.map-lmrwb2em/{z}/{x}/{y}.png",
        {
          attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }
      ).addTo(map);

      L.LayerGroup.EnvironmentalLayers({
        include: ['mapknitter', 'clouds'],
        // exclude: ['mapknitter', 'clouds'],
        hash: true,
      }).addTo(map);

L.glify.longitudeFirst()

$.get('../socioeco.json')
 .done(function(data) {

 data.features.forEach(function(f){
   f.color = 'blue';
 });

  var trimmedData = {
    type: "FeatureCollection",
    features: data.features.slice(0,1000)
  }

  L.glify.points({
    map: map,
    data: trimmedData,
    //size: 8,
    sensitivity: 4,
    click: function (e, point, xy) {
      //set up a standalone popup (use a popup as a layer)
      L.popup()
          .setLatLng([point[1],point[0]])
          .setContent("You clicked the point at " + point)
          .openOn(map);
          //.setContent("You clicked the point at " + point.properties.name + ", " + point.properties.city)
    },
  });

 });
    </script>
    
  </body>
</html>

